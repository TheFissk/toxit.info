<h1>Snapshot selection</h1>
<select id="snapshot-select" name="snapshot_id">
    {% for task in iTasks %}
        <option value="{{ task.id }}" {% if selected == task %}selected{% endif %}>Snapshot: {{ task.id }}</option>
    {% endfor %}
</select>

<br>

<h1>VisJS</h1>

<!-- Data will be displayed here -->
<div id="Toxit-SubredditGraph">
</div>

<script type="text/javascript">
    // create an array with nodes
    var sub_nodes = new vis.DataSet([
        // Use an empty string as the default value for `sub.edges` if it is not defined or empty
        // Replace 'old_text' with 'new_text' in the `sub.edges` value
        {% for sub in sub_nodes_context %}
            { id: "{{ sub.subreddit }}", label: "{{ sub.subreddit|default:'failed to load.'|safe }}" },
        {% endfor %}
    ]);

    // create an array with mod edges
    var mod_edges = new vis.DataSet([
        {% for edge in mod_edges_context %}
            { to: {{ edge.to_sub }}, from: {{ edge.from_sub }} },
        {% endfor %}
    ]);

    // create an array with author edges
    var author_edges = new vis.DataSet([
        {% for edge in author_edges_context %}
            { to: {{ edge.to_sub }}, from: {{ edge.from_sub }} },
        {% endfor %}
    ]);

    var container = document.getElementById("Toxit-SubredditGraph");

    var data = {
        nodes: sub_nodes,
        edges: mod_edges,
    };

    var options = {
        nodes:{
            shape: "box",
            margin: 10,
        }
    };

    var network = new vis.Network(container, data, options);

    // ajax goes here
</script>